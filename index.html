<!DOCTYPE html>
 
<html>
<head>
	<meta charset="utf-8"/>
	<meta name="description" content="Gives you realtime visual feedback on your pitch when speaking Chinese">
	<meta name="keywords" content="Chinese,tones,Web audio,JavaScript">
	<meta name="author" content="Tor Nilsson Ã–hrn">
    <title>Toney</title>
	<link type="text/css" rel="stylesheet" href="toney.css">
</head>

<body>
	<canvas id="toneLine" width="800px" height="200px"></canvas>
	<div id="player">
	  <button id="playSound">Play the Audio</button>
	  <button id="pauseSound">Pause the Audio</button>
	</div>
	<div id="message"></div>
	 <!-- Third party js libraries -->
  <script type="text/javascript" src="js/jquery-1.8.3.min.js"></script>
  <script type="text/javascript" src="js/webgl-utils.js"></script>
  <script type="text/javascript" src="js/underscore.js"></script>
  <script type="text/javascript" src="js/backbone.js"></script>
  <!-- Toney js files -->
  <script type="text/javascript" src="js/inputStates.js"></script>
  <script type="text/javascript" src="js/toneModel.js"></script>
  <script type="text/javascript" src="js/toneView.js"></script>
  <script>
	$(function() {
		var model, line;
		
		

		toneyModel = new ToneModel();

		// example on how to set new audio source
		// toneyModel.set({
		// 	soundfileSource: "audio/ma_short.wav"
		// });

		toneLineContext = $("#toneLine")[0].getContext('2d');

		$('#player').append(toneyModel.get('audio'));
		$('#playSound').click( function() {
			toneyModel.playSound();
		});
		$('#pauseSound').click(function() {
			toneyModel.pauseSound();
		});

		line = new ToneLineView({
			model: toneyModel,
			ctx: toneLineContext
		});

		function tick() {
			requestAnimFrame(tick);
			line.draw();
		}
		tick();


	});
</script>
</body>
</html>